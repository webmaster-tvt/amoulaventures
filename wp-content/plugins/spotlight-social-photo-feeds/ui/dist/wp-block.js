var Spotlight=(window.webpackJsonpSpotlight=window.webpackJsonpSpotlight||[]).push([[15],{0:function(e,t){e.exports=React},122:function(e,t,n){"use strict";var a=n(123);function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,r,c){if(c!==a){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return n.PropTypes=n,n}},123:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},124:function(e,t,n){"use strict";var a=n(184),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},c={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function i(e){return a.isMemo(e)?c:l[e.$$typeof]||o}l[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[a.Memo]=c;var s=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,a){if("string"!=typeof n){if(m){var o=f(n);o&&o!==m&&e(t,o,a)}var c=u(n);d&&(c=c.concat(d(n)));for(var l=i(t),g=i(n),b=0;b<c.length;++b){var y=c[b];if(!(r[y]||a&&a[y]||g&&g[y]||l&&l[y])){var h=p(n,y);try{s(t,y,h)}catch(e){}}}}return t}},131:function(e,t,n){"use strict";function a(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return a}))},1320:function(e,t,n){"use strict";n.r(t);var a=n(881),o=n(0),r=n.n(o),c=n(142),l=n.n(c),i=n(882),s=n(581),u=n(15),d=n(65),p=n(8),f=n(21),m=n(6),g=n(220),b=n(1);const y=e=>e.wpBlock.isLoaded;var h=n(27),v=n(155),E=n(116),w=n(93),S=n(112);const k=Object(h.b)("wpBlock/load",(e,t)=>{return n=void 0,a=void 0,r=function*(){try{yield Promise.all([t.dispatch(Object(w.b)()),t.dispatch(Object(S.c)())])}catch(e){console.error(e)}},new((o=void 0)||(o=Promise))((function(e,t){function c(e){try{i(r.next(e))}catch(e){t(e)}}function l(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(c,l)}i((r=r.apply(n,a||[])).next())}));var n,a,o,r}),_=Object(h.c)({name:"wpBlock",initialState:{isLoaded:!1},reducers:{},extraReducers:e=>e.addCase(k.pending,e=>{e.isLoaded=!1}).addCase(k.fulfilled,e=>{e.isLoaded=!0})}),x=Object(h.a)({reducer:{[_.name]:_.reducer,[v.a.name]:v.a.reducer,[E.b.name]:E.b.reducer}});var O=n(68),C=n(31),j=n(190),D=n(347);const P={label:"- Choose a feed -",value:""},T=f.a.config.adminUrl+"admin.php?page=spotlight-instagram&screen=new";function I({attributes:e,setAttributes:t,className:n}){const a=Object(b.c)(y),c=Object(b.c)(O.b),d=r.a.useRef(null),[f,h]=r.a.useState(null),[v,E]=r.a.useState(!1),[w,S]=r.a.useState(!1);function k(e){t({feedId:parseInt(e)}),E(!1)}if(Object(o.useEffect)(()=>{a&&function e(n){var a;if(!n)return void(1===c.length&&(null===(a=c[0])||void 0===a?void 0:a.id)?e(c[0].id):E(!0));const o=Object(O.a)(n)(x.getState());if(!o)return h(null),E(!0),void S(!0);d.current=n,t({feedId:n}),E(!1),S(!1),h(new m.d(o.options,u.a.DESKTOP,{getAccount:e=>Object(C.a)(e)(x.getState())}))}(e.feedId)},[a,e.feedId]),!a)return r.a.createElement("div",{className:l.a.loading},r.a.createElement(j.a,{size:50}));const _=e.feedId?e.feedId.toString():"",P=c.find(t=>t.id===e.feedId),T=c.map(e=>({label:e.name?e.name:"(no name)",value:""+e.id}));return r.a.createElement("div",null,!v&&r.a.createElement(i.BlockControls,null,c.length>1&&r.a.createElement(s.Toolbar,null,r.a.createElement("div",{className:l.a.selector},r.a.createElement("label",{className:l.a.selectorLabel},r.a.createElement("span",null,"Feed:")),r.a.createElement("div",{className:l.a.selectorListContainer},r.a.createElement(s.SelectControl,{value:_,onChange:k,options:T}))))),r.a.createElement("div",null,v&&r.a.createElement(B,null,w&&r.a.createElement(R,{feedId:_}),c.length>0?r.a.createElement(N,{value:_,onChange:k,options:T}):r.a.createElement(A,null)),!v&&f&&!f.hasSources()&&r.a.createElement(B,null,r.a.createElement(W,{feed:P})),!v&&f&&f.hasSources()&&r.a.createElement("div",{className:Object(p.b)(n,l.a.feedContainer)},r.a.createElement(D.a,null,r.a.createElement(g.a,{state:f,onUpdateState:h,autoDevice:!0})))))}function B({children:e}){return r.a.createElement("div",{className:l.a.root},r.a.createElement("img",{className:l.a.logo,src:d.a.image("spotlight-favicon.png"),alt:""}),e)}function N({value:e,onChange:t,options:n}){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.a.label},"Choose which Instagram feed to show:"),r.a.createElement(s.SelectControl,{value:e,onChange:t,options:[P].concat(n)}))}function R({feedId:e}){return r.a.createElement("div",{className:l.a.missingFeedMsg},"This block is hidden because the selected feed (with ID #",e,") does not exist or has been deleted.")}function W({feed:e}){const t="admin.php?page=spotlight-instagram&screen=edit&id="+e.id.toString();return r.a.createElement("div",{className:l.a.noSourcesMsg},r.a.createElement("span",null,'The feed "',r.a.createElement("b",null,e.name),'" does not have any Instagram posts to show.'),r.a.createElement("br",null),r.a.createElement("a",{href:t,target:"_blank"},"Click here")," ",r.a.createElement("span",null,"to edit the feed and select an account or hashtag."))}function A(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.a.label},"You do not have any Instagram feeds."),r.a.createElement("div",{className:l.a.label},"Go to"," ",r.a.createElement("a",{href:T,target:"_blank"},"Instagram feeds â†’ Add New")," ","to begin designing your first feed."),r.a.createElement("div",{className:l.a.label},"You can keep this page open and Spotlight's block will automatically detect your new feed."))}const L={title:"Spotlight Instagram Feed",description:"Embed a Spotlight Instagram feed",category:"widgets",icon:"instagram",keywords:["instagram","feed","feeds","ig","story","spotlight"],attributes:{feedId:{type:"number"}},supports:{html:!1},edit:function(e){return r.a.createElement(b.a,{store:x},r.a.createElement(I,Object.assign({},e)))}};Object(a.registerBlockType)("spotlight/instagram",L),x.dispatch(k()),window.addEventListener("focus",(function(){x.getState().wpBlock.isLoaded&&x.dispatch(k())}))},142:function(e,t,n){e.exports={root:"SliWpBlockEdit__root",loading:"SliWpBlockEdit__loading",logo:"SliWpBlockEdit__logo",label:"SliWpBlockEdit__label","missing-feed-msg":"SliWpBlockEdit__missing-feed-msg SliWpBlockEdit__label",missingFeedMsg:"SliWpBlockEdit__missing-feed-msg SliWpBlockEdit__label","no-sources-msg":"SliWpBlockEdit__no-sources-msg",noSourcesMsg:"SliWpBlockEdit__no-sources-msg",selector:"SliWpBlockEdit__selector","selector-label":"SliWpBlockEdit__selector-label",selectorLabel:"SliWpBlockEdit__selector-label","selector-list-container":"SliWpBlockEdit__selector-list-container",selectorListContainer:"SliWpBlockEdit__selector-list-container","feed-container":"SliWpBlockEdit__feed-container",feedContainer:"SliWpBlockEdit__feed-container"}},179:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},18:function(e,t,n){e.exports=n(122)()},238:function(e,t,n){"use strict";function a(e,t){return e===t}function o(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var a=t.length,o=0;o<a;o++)if(!e(t[o],n[o]))return!1;return!0}function r(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}n.d(t,"a",(function(){return c}));var c=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return function(){for(var t=arguments.length,a=Array(t),o=0;o<t;o++)a[o]=arguments[o];var c=0,l=a.pop(),i=r(a),s=e.apply(void 0,[function(){return c++,l.apply(null,arguments)}].concat(n)),u=e((function(){for(var e=[],t=i.length,n=0;n<t;n++)e.push(i[n].apply(null,arguments));return s.apply(null,e)}));return u.resultFunc=l,u.dependencies=i,u.recomputations=function(){return c},u.resetRecomputations=function(){return c=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=null,r=null;return function(){return o(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}))},284:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},290:function(e,t,n){"use strict";(function(e,a){var o,r=n(131);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:a;var c=Object(r.a)(o);t.a=c}).call(this,n(62),n(179)(e))},291:function(e,t,n){"use strict";function a(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,a,e):t(o)}}}}var o=a();o.withExtraArgument=a,t.a=o},322:function(e,t,n){"use strict";e.exports=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},44:function(e,t){e.exports=ReactDOM},453:function(e,t,n){"use strict";var a=n(284),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,r,c,l,i,s,u=!1;t||(t={}),n=t.debug||!1;try{if(c=a(),l=document.createRange(),i=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(a){if(a.stopPropagation(),t.format)if(a.preventDefault(),void 0===a.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=o[t.format]||o.default;window.clipboardData.setData(r,e)}else a.clipboardData.clearData(),a.clipboardData.setData(t.format,e);t.onCopy&&(a.preventDefault(),t.onCopy(a.clipboardData))})),document.body.appendChild(s),l.selectNodeContents(s),i.addRange(l),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(l):i.removeAllRanges()),s&&document.body.removeChild(s),c()}return u}},581:function(e,t){!function(){e.exports=this.wp.components}()},62:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},881:function(e,t){!function(){e.exports=this.wp.blocks}()},882:function(e,t){!function(){e.exports=this.wp.blockEditor}()}},[[1320,3,1,2,0,5,4]]]);